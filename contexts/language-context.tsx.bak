'use client';

import { createContext, useContext, useEffect, useState, ReactNode } from 'react';

type Language = 'id' | 'en';

interface LanguageContextType {
  language: Language;
  toggleLanguage: () => void;
  setLanguage: (language: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Translation dictionary
const translations = {
  id: {
    dashboard: 'Dasbor',
    welcome: 'Selamat datang',
    total_income: 'Total Pendapatan',
    total_expenses: 'Total Pengeluaran',
    net_worth: 'Kekayaan Bersih',
    profit_loss: 'Laba/Rugi',
    total_assets: 'Total Aset',
    total_investments: 'Total Investasi',
    recent_transactions: 'Transaksi Terbaru',
    view_all: 'Lihat semua',
    income: 'Pendapatan',
    expense: 'Pengeluaran',
    assets: 'Aset',
    investments: 'Investasi',
    documents: 'Dokumen',
    transactions: 'Transaksi',
    record_new: 'Catat baru',
    manage_assets: 'Kelola aset',
    track_investments: 'Lacak investasi',
    manage_documents: 'Kelola dokumen',
    light_mode: 'Mode Terang',
    dark_mode: 'Mode Gelap',
    language: 'Bahasa',
    indonesian: 'Indonesia',
    english: 'English',
    reports: 'Laporan',
    settings: 'Pengaturan',
    finance_app: 'Aplikasi Keuangan',
    quick_add: 'Tambah Cepat',
    quick_add_transaction: 'Tambah transaksi cepat',
    redirecting_to_transactions: 'Mengarahkan ke halaman transaksi...',
    financial_dashboard: 'Dasbor Keuangan',
    loading_assets: 'Memuat aset...',
    loading_documents: 'Memuat dokumen...',
    loading_investments: 'Memuat investasi...',
    loading_transactions: 'Memuat transaksi...',
    manage_company_assets: 'Kelola aset perusahaan',
    view_manage_company_assets: 'Lihat dan kelola aset perusahaan Anda',
    all_assets: 'Semua Aset',
    add_asset: 'Tambah Aset',
    edit_asset: 'Edit Aset',
    add_new_company_asset: 'Tambahkan aset perusahaan baru',
    edit_asset_details: 'Edit detail aset Anda',
    name: 'Nama',
    description: 'Deskripsi',
    purchase_date: 'Tanggal Pembelian',
    purchase_price: 'Harga Pembelian',
    current_value: 'Nilai Saat Ini',
    depreciation_rate: 'Tingkat Depresiasi',
    category: 'Kategori',
    maintenance: 'Pemeliharaan',
    insurance: 'Asuransi',
    update_asset: 'Perbarui Aset',
    no_assets_found: 'Tidak ada aset ditemukan',
    add_first_asset: 'Tambahkan aset pertama Anda',
    confirm_delete_asset: 'Apakah Anda yakin ingin menghapus aset ini?',
    failed_to_delete_asset: 'Gagal menghapus aset',
    error_deleting_asset: 'Kesalahan saat menghapus aset:',
    manage_financial_documents: 'Kelola dokumen keuangan Anda',
    all_documents: 'Semua Dokumen',
    view_manage_financial_documents: 'Lihat dan kelola dokumen keuangan Anda',
    upload_document: 'Unggah Dokumen',
    edit_document: 'Edit Dokumen',
    add_new_financial_document: 'Tambahkan dokumen keuangan baru',
    edit_document_details: 'Edit detail dokumen Anda',
    type: 'Jenis',
    select_type: 'Pilih jenis',
    receipt: 'Kuitansi',
    invoice: 'Faktur',
    contract: 'Kontrak',
    statement: 'Pernyataan',
    other: 'Lainnya',
    upload_date: 'Tanggal Unggah',
    update_document: 'Perbarui Dokumen',
    no_documents_found: 'Tidak ada dokumen ditemukan',
    upload_first_document: 'Unggah dokumen pertama Anda',
    confirm_delete_document: 'Apakah Anda yakin ingin menghapus dokumen ini?',
    failed_to_delete_document: 'Gagal menghapus dokumen',
    error_deleting_document: 'Kesalahan saat menghapus dokumen:',
    manage_investment_portfolio: 'Kelola portofolio investasi Anda',
    all_investments: 'Semua Investasi',
    view_manage_investments: 'Lihat dan kelola investasi Anda',
    add_investment: 'Tambah Investasi',
    edit_investment: 'Edit Investasi',
    add_new_investment_to_portfolio: 'Tambahkan investasi baru ke portofolio Anda',
    edit_investment_details: 'Edit detail investasi Anda',
    roi_percent: 'ROI (%)',
    quantity: 'Kuantitas',
    select_category: 'Pilih kategori',
    update_investment: 'Perbarui Investasi',
    no_investments_found: 'Tidak ada investasi ditemukan',
    add_first_investment: 'Tambahkan investasi pertama Anda',
    confirm_delete_investment: 'Apakah Anda yakin ingin menghapus investasi ini?',
    failed_to_delete_investment: 'Gagal menghapus investasi',
    error_deleting_investment: 'Kesalahan saat menghapus investasi:',
    no_category: 'Tanpa kategori',
    manage_income_expenses: 'Kelola pendapatan dan pengeluaran Anda',
    all_transactions: 'Semua Transaksi',
    view_manage_financial_transactions: 'Lihat dan kelola transaksi keuangan Anda',
    add_transaction: 'Tambah Transaksi',
    edit_transaction: 'Edit Transaksi',
    add_new_income_expense_transaction: 'Tambahkan transaksi pendapatan atau pengeluaran baru',
    edit_transaction_details: 'Edit detail transaksi Anda',
    date: 'Tanggal',
    amount: 'Jumlah',
    update_transaction: 'Perbarui Transaksi',
    no_transactions_found: 'Tidak ada transaksi ditemukan',
    add_first_transaction: 'Tambahkan transaksi pertama Anda',
    confirm_delete_transaction: 'Apakah Anda yakin ingin menghapus transaksi ini?',
    transaction_deleted: 'Transaksi Dihapus',
    transaction_successfully_deleted: 'Transaksi Anda telah berhasil dihapus.',
    error: 'Kesalahan',
    failed_to_delete_transaction: 'Gagal menghapus transaksi. Silakan coba lagi.',
    error_deleting_transaction: 'Kesalahan saat menghapus transaksi:',
    error_occurred_while_deleting_transaction: 'Terjadi kesalahan saat menghapus transaksi.',
    transaction_updated: 'Transaksi Diperbarui',
    transaction_successfully_updated: 'Transaksi Anda telah berhasil diperbarui.',
    transaction_created: 'Transaksi Dibuat',
    transaction_successfully_created: 'Transaksi Anda telah berhasil dibuat.',
    failed_to_save_transaction: 'Gagal menyimpan transaksi. Silakan coba lagi.',
    error_saving_transaction: 'Kesalahan saat menyimpan transaksi:',
    error_occurred_while_saving_transaction: 'Terjadi kesalahan saat menyimpan transaksi.',
    secure_access_to_financial_data: 'Akses data keuangan Anda secara aman dengan alat manajemen premium kami.',
    welcome_back: 'Selamat Datang Kembali',
    enter_your_email: 'Masukkan email Anda',
    enter_your_password: 'Masukkan password Anda',
    remember_me: 'Ingat saya',
    forgot_password: 'Lupa password?',
    signing_in: 'Masuk',
    sign_in: 'Masuk',
    already_have_account: 'Sudah memiliki akun?',
    sign_up: 'Daftar',
    back_to_home: 'Kembali ke Halaman Utama',
    create_account: 'Buat Akun',
    full_name: 'Nama Lengkap',
    enter_your_full_name: 'Masukkan nama lengkap Anda',
    create_strong_password: 'Buat password yang kuat',
    i_agree_to: 'Saya setuju dengan',
    and: 'dan',
    terms_of_service: 'Ketentuan Layanan',
    privacy_policy: 'Kebijakan Privasi',
    creating_account: 'Buat Akun',
    join_users_managing_finances: 'Bergabunglah dengan {count} pengguna yang mengelola keuangan mereka.',
  },
  creating_account: 'Creating account',
    join_users_managing_finances: 'Join {count} users managing their finances.',
    view_financial_reports: 'View your financial reports',
    select_date_range: 'Select date range',
    filter: 'Filter',
    print: 'Print',
    export: 'Export',
    from_last_month: 'from last month',
    available_reports: 'Available Reports',
    income_statement: 'Income Statement',
    income_statement_description: 'Detailed report of income and expenses',
    expense_report: 'Expense Report',
    expense_report_description: 'Summary of expenses by category',
    balance_sheet: 'Balance Sheet',
    balance_sheet_description: 'Snapshot of assets, liabilities, and equity',
    generate_report: 'Generate Report',
  },
    dashboard: 'Dashboard',
    welcome: 'Welcome',
    total_income: 'Total Income',
    total_expenses: 'Total Expenses',
    net_worth: 'Net Worth',
    profit_loss: 'Profit/Loss',
    total_assets: 'Total Assets',
    total_investments: 'Total Investments',
    recent_transactions: 'Recent Transactions',
    view_all: 'View all',
    income: 'Income',
    expense: 'Expense',
    assets: 'Assets',
    investments: 'Investments',
    documents: 'Documents',
    transactions: 'Transactions',
    record_new: 'Record new',
    manage_assets: 'Manage assets',
    track_investments: 'Track investments',
    manage_documents: 'Manage documents',
    light_mode: 'Light Mode',
    dark_mode: 'Dark Mode',
    language: 'Language',
    indonesian: 'Indonesian',
    english: 'English',
    reports: 'Reports',
    settings: 'Settings',
    finance_app: 'Finance App',
    quick_add: 'Quick Add',
    quick_add_transaction: 'Quick add transaction',
    redirecting_to_transactions: 'Redirecting to transactions page...',
    financial_dashboard: 'Financial Dashboard',
    loading_assets: 'Loading assets...',
    loading_documents: 'Loading documents...',
    loading_investments: 'Loading investments...',
    loading_transactions: 'Loading transactions...',
    loading: 'Loading...',
    manage_company_assets: 'Manage your company assets',
    view_manage_company_assets: 'View and manage your company assets',
    all_assets: 'All Assets',
    add_asset: 'Add Asset',
    edit_asset: 'Edit Asset',
    add_new_company_asset: 'Add a new company asset',
    edit_asset_details: 'Edit your asset details',
    name: 'Name',
    description: 'Description',
    purchase_date: 'Purchase Date',
    purchase_price: 'Purchase Price',
    current_value: 'Current Value',
    depreciation_rate: 'Depreciation Rate',
    category: 'Category',
    maintenance: 'Maintenance',
    insurance: 'Insurance',
    update_asset: 'Update Asset',
    no_assets_found: 'No assets found',
    add_first_asset: 'Add your first asset',
    confirm_delete_asset: 'Are you sure you want to delete this asset?',
    failed_to_delete_asset: 'Failed to delete asset',
    error_deleting_asset: 'Error deleting asset:',
    manage_financial_documents: 'Manage your financial documents',
    all_documents: 'All Documents',
    view_manage_financial_documents: 'View and manage your financial documents',
    upload_document: 'Upload Document',
    edit_document: 'Edit Document',
    add_new_financial_document: 'Add a new financial document',
    edit_document_details: 'Edit your document details',
    type: 'Type',
    select_type: 'Select type',
    receipt: 'Receipt',
    invoice: 'Invoice',
    contract: 'Contract',
    statement: 'Statement',
    other: 'Other',
    upload_date: 'Upload Date',
    update_document: 'Update Document',
    no_documents_found: 'No documents found',
    upload_first_document: 'Upload your first document',
    confirm_delete_document: 'Are you sure you want to delete this document?',
    failed_to_delete_document: 'Failed to delete document',
    error_deleting_document: 'Error deleting document:',
    manage_investment_portfolio: 'Manage your investment portfolio',
    all_investments: 'All Investments',
    view_manage_investments: 'View and manage your investments',
    add_investment: 'Add Investment',
    edit_investment: 'Edit Investment',
    add_new_investment_to_portfolio: 'Add a new investment to your portfolio',
    edit_investment_details: 'Edit your investment details',
    roi_percent: 'ROI (%)',
    quantity: 'Quantity',
    select_category: 'Select category',
    update_investment: 'Update Investment',
    no_investments_found: 'No investments found',
    add_first_investment: 'Add your first investment',
    confirm_delete_investment: 'Are you sure you want to delete this investment?',
    failed_to_delete_investment: 'Failed to delete investment',
    error_deleting_investment: 'Error deleting investment:',
    no_category: 'No category',
    manage_income_expenses: 'Manage your income and expenses',
    all_transactions: 'All Transactions',
    view_manage_financial_transactions: 'View and manage your financial transactions',
    add_transaction: 'Add Transaction',
    edit_transaction: 'Edit Transaction',
    add_new_income_expense_transaction: 'Add a new income or expense transaction',
    edit_transaction_details: 'Edit your transaction details',
    date: 'Date',
    amount: 'Amount',
    update_transaction: 'Update Transaction',
    no_transactions_found: 'No transactions found',
    add_first_transaction: 'Add your first transaction',
    confirm_delete_transaction: 'Are you sure you want to delete this transaction?',
    transaction_deleted: 'Transaction Deleted',
    transaction_successfully_deleted: 'Your transaction has been successfully deleted.',
    error: 'Error',
    failed_to_delete_transaction: 'Failed to delete transaction. Please try again.',
    error_deleting_transaction: 'Error deleting transaction:',
    error_occurred_while_deleting_transaction: 'An error occurred while deleting the transaction.',
    transaction_updated: 'Transaction Updated',
    transaction_successfully_updated: 'Your transaction has been successfully updated.',
    transaction_created: 'Transaction Created',
    transaction_successfully_created: 'Your transaction has been successfully created.',
    failed_to_save_transaction: 'Failed to save transaction. Please try again.',
    error_saving_transaction: 'Error saving transaction:',
    error_occurred_while_saving_transaction: 'An error occurred while saving the transaction.',
    secure_access_to_financial_data: 'Securely access your financial data with our premium management tools.',
    welcome_back: 'Welcome Back',
    enter_your_email: 'Enter your email',
    enter_your_password: 'Enter your password',
    remember_me: 'Remember me',
    forgot_password: 'Forgot password?',
    signing_in: 'Signing in',
    sign_in: 'Sign In',
    already_have_account: 'Already have an account?',
    sign_up: 'Sign up',
    back_to_home: 'Back to Home',
    create_account: 'Create Account',
    full_name: 'Full Name',
    enter_your_full_name: 'Enter your full name',
    create_strong_password: 'Create a strong password',
    i_agree_to: 'I agree to',
    and: 'and',
    terms_of_service: 'Terms of Service',
    privacy_policy: 'Privacy Policy',
    creating_account: 'Creating account',
    join_users_managing_finances: 'Join {count} users managing their finances.',
    view_financial_reports: 'View your financial reports',
    select_date_range: 'Select date range',
    filter: 'Filter',
    print: 'Print',
    export: 'Export',
    from_last_month: 'from last month',
    available_reports: 'Available Reports',
    income_statement: 'Income Statement',
    income_statement_description: 'Detailed report of income and expenses',
    expense_report: 'Expense Report',
    expense_report_description: 'Summary of expenses by category',
    balance_sheet: 'Balance Sheet',
    balance_sheet_description: 'Snapshot of assets, liabilities, and equity',
    generate_report: 'Generate Report',
  }
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>('id');

  useEffect(() => {
    // Check for saved language preference
    const savedLanguage = localStorage.getItem('language') as Language | null;
    setLanguageState(savedLanguage || 'id');
  }, []);

  useEffect(() => {
    // Save language preference
    localStorage.setItem('language', language);
  }, [language]);

  const toggleLanguage = () => {
    setLanguageState(prevLanguage => prevLanguage === 'id' ? 'en' : 'id');
  };

  const setLanguage = (newLanguage: Language) => {
    setLanguageState(newLanguage);
  };

  const t = (key: string) => {
    return translations[language][key as keyof typeof translations[typeof language]] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, toggleLanguage, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}